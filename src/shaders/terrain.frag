#version 330 core
out vec4 FragColor;

in float vHeight;

// UNIFORMS
uniform float u_MinHeight;
uniform float u_MaxHeight;

void main() {
    // Normalize Height
    float t = (vHeight - u_MinHeight) / (u_MaxHeight - u_MinHeight);
    
    t = clamp(t, 0.0, 1.0);

    vec3 deepBlue   = vec3(0.0, 0.1, 0.4); 
    vec3 darkGreen  = vec3(0.0, 0.5, 0.1); 
    vec3 lightGreen = vec3(0.4, 0.8, 0.2); 
    vec3 white      = vec3(1.0, 1.0, 1.0); 

    vec3 finalColor;

    if (t < 0.2) {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
        // Bottom 20%:
        float localT = t / 0.2;
        finalColor = mix(deepBlue, darkGreen, localT);
    } 
    else if (t < 0.8) {
        // Mid Section:
        float localT = (t - 0.2) / 0.5;
        finalColor = mix(darkGreen, lightGreen, localT);
    } 
    else {
        float localT = (t - 0.7) / 0.3;
        finalColor = mix(lightGreen, white, localT);
    }

    FragColor = vec4(finalColor, 1.0);
}